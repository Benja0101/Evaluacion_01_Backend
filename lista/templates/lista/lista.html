{% extends 'lista/base.html' %}
{% block title %}Contactos{% endblock %}


{% block content %}
<h1 class="text-3xl font-extrabold admin-title mb-8 text-center">Contactos</h1>

{% if contactos %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for c in contactos %}
    <div class="admin-card p-6 flex flex-col gap-2">
        <div class="flex-1">
            <p class="font-semibold text-lg text-gray-800">{{ c.nombre }}</p>
            <p class="text-gray-500 text-sm mt-1">{{ c.telefono }}<br>{{ c.correo }}</p>
        </div>
        <div class="flex gap-2 mt-4">
            <a href="{% url 'detalle_contacto' c.pk %}" class="admin-btn bg-blue-700 hover:bg-blue-900 text-white py-1 px-4">Ver</a>
            <a href="{% url 'editar_contacto' c.pk %}" class="admin-btn bg-yellow-500 hover:bg-yellow-600 text-white py-1 px-4">Editar</a>
            <button onclick="confirmarEliminar('{{ c.pk }}')" class="admin-btn bg-red-600 hover:bg-red-800 text-white py-1 px-4">Eliminar</button>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="admin-card p-6 text-center text-gray-600">
    No hay contactos. <a href="{% url 'agregar_contacto' %}" class="admin-link">Agrega uno</a>.
</div>
{% endif %}

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
function confirmarEliminar(pk){
    Swal.fire({
        title: '¿Estás seguro?',
        text: "¡No podrás revertir esto!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#e3342f',
        cancelButtonColor: '#3085d6',
        confirmButtonText: 'Sí, eliminar',
        cancelButtonText: 'Cancelar'
    }).then((result) => {
        if(result.isConfirmed){
            window.location.href = '/eliminar/' + pk + '/';
        }
    })
}
</script>
{% endblock %}
